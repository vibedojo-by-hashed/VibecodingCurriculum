# Chapter 21: Agents & Skills

[English](./README.md) | **한국어**

## 이 챕터에서 배우는 것

- Agents로 전문 도우미 만들기
- Skills로 특정 작업 자동화
- 실용적인 활용 예시

---

## 왜 Agents와 Skills를 알아야 할까?

Commands는 프롬프트를 저장하는 것입니다. Agents와 Skills는 한 단계 더 나아갑니다:

- **Agents**: 특정 역할을 하는 전문 Claude
- **Skills**: 특정 키워드에 반응하는 자동화

---

## Agents 시스템

Agents는 특정 역할에 최적화된 Claude입니다.

### Agents 폴더 구조

```
.claude/
└── agents/
    ├── code-reviewer.md   # 코드 리뷰 전문가
    ├── doc-writer.md      # 문서 작성 전문가
    └── tester.md          # 테스트 전문가
```

### Agent 정의하기

```markdown
<!-- .claude/agents/code-reviewer.md -->
# 코드 리뷰 전문가

## 역할
당신은 시니어 개발자입니다. 코드 리뷰를 전문으로 합니다.

## 관점
- 버그와 취약점 찾기
- 성능 문제 식별
- 가독성 개선 제안
- 베스트 프랙티스 적용 확인

## 리뷰 형식
1. 심각도별 이슈 분류 (Critical, Major, Minor)
2. 각 이슈에 대한 구체적 개선 제안
3. 잘된 부분도 언급

## 톤
건설적이고 교육적으로. 비난하지 않고 개선 방향 제시.
```

### Agent 사용하기

```
> @code-reviewer 이 PR 리뷰해줘
```

`@`로 Agent를 호출합니다.

### 이걸 알면 뭐가 좋을까?

**일관된 리뷰 품질:**

매번 같은 관점으로 리뷰하므로 놓치는 부분이 없습니다.

**역할에 맞는 응답:**

일반 Claude와 다르게 특정 관점에서만 답변합니다.

---

## 실용적인 Agents 예시

### 1. 문서화 전문가

```markdown
<!-- .claude/agents/doc-writer.md -->
# 문서화 전문가

## 역할
기술 문서를 명확하고 이해하기 쉽게 작성합니다.

## 원칙
- 간결하게 (불필요한 설명 제거)
- 예시 포함 (코드 예시 필수)
- 구조적으로 (제목, 소제목 활용)

## 문서 형식
- README: 프로젝트 개요, 설치, 사용법
- API 문서: 엔드포인트, 파라미터, 응답
- 가이드: 단계별 설명

## 언어
한글로 작성, 영어 기술용어는 그대로 사용
```

```
> @doc-writer 이 API에 대한 문서 작성해줘
```

### 2. 테스트 전문가

```markdown
<!-- .claude/agents/tester.md -->
# 테스트 전문가

## 역할
견고한 테스트 코드를 작성합니다.

## 테스트 전략
- 단위 테스트 우선
- 엣지 케이스 반드시 포함
- 모킹 최소화

## 테스트 구조
```
describe('함수명', () => {
  it('정상 케이스', () => {})
  it('에러 케이스', () => {})
  it('엣지 케이스', () => {})
})
```

## 도구
- Jest (기본)
- React Testing Library (컴포넌트)
- MSW (API 모킹)
```

```
> @tester 이 함수에 대한 테스트 작성해줘
```

### 3. 리팩토링 전문가

```markdown
<!-- .claude/agents/refactorer.md -->
# 리팩토링 전문가

## 역할
기존 코드를 개선합니다. 동작은 유지하면서 품질을 높입니다.

## 리팩토링 원칙
- 작은 단위로 진행
- 각 단계에서 테스트 통과 확인
- 변경 이유 설명

## 우선순위
1. 중복 제거
2. 함수 분리 (20줄 이하)
3. 네이밍 개선
4. 복잡도 감소

## 주의
- 기능 추가는 리팩토링이 아님
- 한 번에 너무 많이 바꾸지 않기
```

```
> @refactorer 이 컴포넌트 리팩토링해줘
```

### 4. 보안 전문가

```markdown
<!-- .claude/agents/security.md -->
# 보안 전문가

## 역할
코드의 보안 취약점을 찾고 개선 방안을 제시합니다.

## 체크리스트
- SQL 인젝션
- XSS (크로스 사이트 스크립팅)
- CSRF
- 인증/인가 취약점
- 민감 정보 노출

## 보고 형식
1. 취약점 설명
2. 공격 시나리오
3. 해결 방법
4. 예방 코드

## 심각도
- Critical: 즉시 수정 필요
- High: 빠른 수정 필요
- Medium: 계획적 수정
- Low: 권장 사항
```

```
> @security 이 API 보안 검토해줘
```

---

## Skills 시스템

Skills는 특정 키워드에 자동으로 반응하는 기능입니다.

### Skills 폴더 구조

```
.claude/
└── skills/
    ├── pr-review.md      # PR 관련 요청에 반응
    ├── deploy.md         # 배포 관련 요청에 반응
    └── debug.md          # 디버깅 관련 요청에 반응
```

### Skill 정의하기

Skills는 frontmatter(메타데이터)를 사용해서 더 정교하게 설정할 수 있습니다:

```markdown
<!-- .claude/skills/pr-review.md -->
---
name: PR Review
description: Pull Request 리뷰 및 코드 분석
allowed-tools: [Read, Glob, Grep, Bash]
model: sonnet
---

# PR 리뷰 스킬

## 키워드
- "PR 리뷰"
- "pull request 확인"
- "코드 리뷰"
- "review this PR"

## 동작
1. git diff로 변경사항 확인
2. 변경된 파일별 분석
3. 이슈 식별 및 제안
4. 전체 요약 제공

## 출력 형식
### 요약
- 변경 파일 수
- 추가/삭제 라인
- 주요 변경 내용

### 상세 리뷰
[파일별 리뷰]

### 전체 평가
[통과/수정 필요]
```

### Skill 사용하기

키워드를 포함해서 요청하면 자동으로 Skill이 활성화됩니다:

```
> 이 PR 리뷰해줘
```

"PR 리뷰" 키워드가 있으므로 자동으로 PR 리뷰 Skill이 동작합니다.

### 이걸 알면 뭐가 좋을까?

**자연스러운 자동화:**

키워드만 포함하면 자동으로 적절한 동작을 수행합니다.

**일관된 프로세스:**

같은 키워드에 항상 같은 방식으로 처리합니다.

---

## 실용적인 Skills 예시

### 1. 디버깅 스킬

```markdown
<!-- .claude/skills/debug.md -->
# 디버깅 스킬

## 키워드
- "에러"
- "버그"
- "안 돼"
- "안 되"
- "오류"
- "고장"
- "실패"

## 동작
1. 에러 메시지 분석
2. 관련 코드 찾기
3. 원인 파악
4. 해결 방법 제시

## 진행 순서
- 에러 메시지 그대로 읽기
- 스택 트레이스 분석
- 관련 파일 확인
- 단계별 해결 시도
```

```
> 로그인할 때 에러 나
```

자동으로 디버깅 프로세스가 시작됩니다.

### 2. 배포 스킬

```markdown
<!-- .claude/skills/deploy.md -->
# 배포 스킬

## 키워드
- "배포"
- "deploy"
- "프로덕션"
- "production"
- "릴리즈"

## 체크리스트
- [ ] 테스트 통과?
- [ ] 빌드 성공?
- [ ] 환경변수 설정?
- [ ] 마이그레이션 필요?

## 동작
1. 현재 상태 확인
2. 체크리스트 검증
3. 배포 명령 실행
4. 결과 확인
```

```
> 스테이징에 배포해줘
```

자동으로 배포 체크리스트를 확인하고 진행합니다.

### 3. 성능 분석 스킬

```markdown
<!-- .claude/skills/performance.md -->
# 성능 분석 스킬

## 키워드
- "느려"
- "성능"
- "최적화"
- "slow"
- "performance"

## 분석 항목
- 렌더링 횟수 (React)
- 불필요한 재계산
- 메모리 누수
- API 호출 최적화
- 번들 크기

## 동작
1. 느린 부분 식별
2. 원인 분석
3. 최적화 방법 제안
4. 적용 후 비교
```

```
> 이 페이지 왜 이렇게 느려?
```

자동으로 성능 분석을 시작합니다.

---

## Agents vs Skills

### 언제 뭘 쓸까?

```
┌─────────────────────────────────────────────────────────────────┐
│                    Agents vs Skills                              │
├──────────────────────────────┬──────────────────────────────────┤
│           Agents             │           Skills                  │
├──────────────────────────────┼──────────────────────────────────┤
│ @로 명시적 호출               │ 키워드로 자동 활성화              │
│ 역할/관점 정의               │ 프로세스/절차 정의               │
│ 전문가 페르소나              │ 자동화된 워크플로우              │
│ 예: @code-reviewer           │ 예: "PR 리뷰" 언급 시 자동 동작   │
└──────────────────────────────┴──────────────────────────────────┘
```

### 조합해서 사용하기

```
> @security 이 PR 리뷰해줘
```

- `@security`: 보안 전문가 관점 (Agent)
- "PR 리뷰": PR 리뷰 프로세스 (Skill)

보안 전문가 관점에서 PR 리뷰 프로세스를 실행합니다.

---

## 팀에서 공유하기

### Git에 커밋

```
my-project/
├── .claude/
│   ├── agents/       # 팀 공통 Agents
│   │   ├── code-reviewer.md
│   │   └── doc-writer.md
│   └── skills/       # 팀 공통 Skills
│       ├── pr-review.md
│       └── deploy.md
├── CLAUDE.md
└── src/
```

### 팀 표준 문서화

```markdown
# 팀 Agents & Skills

## Agents
- `@code-reviewer` - 코드 리뷰 전문가
- `@doc-writer` - 문서화 전문가
- `@security` - 보안 전문가

## Skills (자동 활성화)
- "PR 리뷰" - PR 리뷰 프로세스
- "배포" - 배포 체크리스트
- "에러" - 디버깅 프로세스
```

---

## 정리

이번 챕터에서 배운 것:
- [x] Agents로 전문 역할 정의
- [x] Skills로 키워드 기반 자동화
- [x] Agents와 Skills 차이
- [x] 실용적인 활용 예시
- [x] 팀에서 공유하기

**핵심 포인트**: Agents는 "누구처럼", Skills는 "무엇을"에 집중합니다.

다음 챕터에서는 MCP로 외부 서비스와 연동하는 방법을 배웁니다.

[Chapter 22: MCP 연동](../Chapter22/README.ko.md)으로 넘어가세요.
